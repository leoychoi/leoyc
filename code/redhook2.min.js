let redhook=new p5((t=>{let e,i,s,h,o=[];const l=[50];let c=!0,r=!0;class d{constructor({xPos:t,yPos:e},[i,s,h]){this.xPos=t,this.yPos=e,this.rgb=[i,s,h],this.framesAlive=0}}t.preload=()=>{e=t.loadImage("redhook.jpeg")},t.setup=()=>{e.resize(0,.75*t.windowHeight),t.createCanvas(e.width,.75*t.windowHeight),t.image(e,0,0),e.loadPixels(),a()},t.mouseClicked=()=>{t.mouseX>0&&t.mouseX<t.width&&t.mouseY>0&&t.mouseY<t.height&&(c=!c)},t.keyPressed=()=>{t.mouseX>0&&t.mouseX<t.width&&t.mouseY>0&&t.mouseY<t.height&&(70===t.keyCode?(t.clear(),t.image(e,0,0),r=!r):82==t.keyCode&&(t.clear(),t.image(e,0,0),a()))};const a=()=>{for(let h=0;h<50;h++){var e=t.createVector(t.random(t.width/2+25,t.width),t.random(2*t.height/3),2),i=1.5*t.PI,s=t.createVector(t.cos(i),t.sin(i));t.random(1,2);l[h]=new n(e,s,1.5)}};t.draw=()=>{if(t.mouseX>0&&t.mouseX<t.width&&t.mouseY>0&&t.mouseY<t.height&&c){if(r&&t.frameCount%100!=0)for(let l=0;l<4;l++){x=Math.random()*e.width,y=Math.random()*e.height;let l=e.get(x,y),c=l[0],r=l[1],a=l[2];if(!(c+r+a<300||c>200&&a>200||c+r+a>800)){t.noStroke();for(let l=0;l<e.width*e.height*4;l+=4)if(e.pixels[l]>=c-2&&e.pixels[l]<=c+2&&e.pixels[l+1]>=r-2&&e.pixels[l+1]<=r+2&&e.pixels[l+2]>=a-2&&e.pixels[l+2]<=a+2){let c=l/e.width/4,r=(c-Math.floor(c))*e.width;i=e.pixels[l],s=e.pixels[l+1],h=e.pixels[l+2],t.fill(i,s,h),e.pixels[l]>200&&e.pixels[l+1]>100&&e.pixels[l+2]<60&&r>50&&c<e.height*(2/3)&&(o.push(new d(m(l),[e.pixels[l],e.pixels[l+1],e.pixels[l+2]])),o.length>20&&o.splice(0,1)),t.circle(r,Math.floor(c),3.5)}}}let c=!1;for(let t=0;t<l.length;t++)l[t].run(),l[t].active&&(c=!0);c||(t.clear(),t.image(e,0,0),a())}};const m=t=>{let i=t/e.width/4;return{xPos:(i-Math.floor(i))*e.width,yPos:i}};class n{r=0;g=0;b=0;active=!0;constructor(t,e,i){this.loc=t,this.checkColor(),this.dir=e,this.speed=i}run(){this.move(),this.checkEdges(),this.update()}checkColor(){for(;this.r<200||this.g<100||this.b>60||this.loc.x>503&&this.loc.x<529&&this.loc.y>74&&this.loc.y<164;){this.loc.x=t.random(t.width/2+25,t.width),this.loc.y=t.random(2*t.height/3);let i=e.get(this.loc.x,this.loc.y);this.r=i[0],this.g=i[1],this.b=i[2]}}move(){if(this.active){let i=t.noise(this.loc.x/400,this.loc.y/400,t.frameCount/400)*(t.PI+t.QUARTER_PI)*1.5;this.dir.x=t.cos(i),this.dir.y=t.sin(i);var e=this.dir.copy();e.mult(1*this.speed),this.loc.add(e)}}checkEdges(){if(this.loc.x<0||this.loc.x>t.width||this.loc.y<0||this.loc.y>t.height){this.active=!0,this.loc=t.createVector(t.random(t.width/2+25,t.width),t.random(2*t.height/3),2);let i=e.get(this.loc.x,this.loc.y);this.r=i[0],this.g=i[1],this.b=i[2],this.checkColor()}}update(){t.noStroke(),t.fill(this.r,this.g,this.b),t.ellipse(this.loc.x,this.loc.y,this.loc.z)}}}),"redhookSketch");